---
title: "EC-CUBE を Cloudflare で不正アクセスから護る"
emoji: "🔥"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["ECCUBE", "SECURITY", "CLOUDFLARE"]
published: false
---
2023年もあと少し。この1年を振り返ってみると、EC-CUBEユーザーグループの勉強会でセキュリティの話ばかりしていた気がします。
クレジットマスター攻撃をはじめとした不正アクセスが激増し、本当に他人事ではない時代になってきております。

EC-CUBE4.2系には2要素認証やスロットリングをはじめとしたセキュリティ関連の新機能が追加されていってますが、2系や3系には追加されていません。
2系や3系から、4系へのリニューアルは多額のコストや時間もかかり、現実的に難しい店舗も多いです。
また、最近はクレジットカードの加盟店審査も厳しくなり、セキュリティチェックリストの提出を求められる場合もあり、セキュリティ要件を満たせないために加盟店契約を断念せさるえないケースも耳にします。

EC-CUBE2系を運用中の店舗に Cloudflare を導入して、不正アクセスから保護するノウハウが蓄積されてきましたので、ご紹介したいと思います。

ちなみに、 Cloudflare の Freeプランは無料です。
Proプランは$20/月です。
Freeプランでも必要最低限の保護はできますが、大量の個人情報を扱うEC-CUBEでは Pro プランをおすすめします。
$20/月(現在のレートで約3,500円/月)の捻出を悩まれる方が多いです。
今まで大丈夫だったからという理由から導入を見送った店舗で、今年に入って不正アクセス被害が発生していたりします。
不正アクセス被害に遭うと、多くのお金・時間・信用が失われます。
保険だと思って、 Pro プランの導入をおすすめします。
(前置きが長くてすみません)

Cloudflare の登録方法はこちらを参考にしてください。

導入にあたってセキュリティが大幅に強化されますが、悪質ではない通常のアクセスを誤認して、ブロックしてしまう場合があります。設定の際は、技術者の方に相談されることをおすすめします。


## (Freeプラン) 30秒で reCAPTCHA を設定する

## (Freeプラン) EC-CUBE2系, 3系で2段階認証を実現する

## (Freeプラン) 不正注文から護る

## (Proプラン) EC-CUBE2系, 3系でスロットリング/アカウントロックを実現する

## (Proプラン) 悪質な bot から護る

## (Proプラン) 日々繰り返される不正アクセスから護る
